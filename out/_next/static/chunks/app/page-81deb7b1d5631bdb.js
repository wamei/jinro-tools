(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1145:(e,t,l)=>{Promise.resolve().then(l.bind(l,7290))},4436:(e,t,l)=>{"use strict";l.d(t,{k5:()=>d});var r=l(2115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(s),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e}).apply(this,arguments)}function c(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),l.push.apply(l,r)}return l}function o(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?c(Object(l),!0).forEach(function(t){var r,s,a;r=e,s=t,a=l[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):c(Object(l)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))})}return e}function d(e){return t=>r.createElement(u,i({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,l)=>r.createElement(t.tag,o({key:l},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var l,{attr:s,size:a,title:c}=e,d=function(e,t){if(null==e)return{};var l,r,s=function(e,t){if(null==e)return{};var l={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;l[r]=e[r]}return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)l=a[r],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(s[l]=e[l])}return s}(e,n),u=a||t.size||"1em";return t.className&&(l=t.className),e.className&&(l=(l?l+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:l,style:o(o({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==a?r.createElement(a.Consumer,null,e=>t(e)):t(s)}},7290:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>b});var r=l(5155),s=l(2115);let a={alive:"生存",bitten:"噛まれ",hanged:"吊られ"},n={unknown:"？",white:"白",black:"黒"},i={blue:"#3498db",red:"#e74c3c",yellow:"#f1c40f",gray:"#bdc3c7",black:"#000",white:"#fff"},c={citizen:{name:"市民",color:i.blue},seer:{name:"占い師",color:i.blue},knight:{name:"騎士",color:i.blue},medium:{name:"霊媒師",color:i.blue},hunter:{name:"ハンター",color:i.blue},werewolf:{name:"人狼",color:i.red},madman:{name:"狂人",color:i.red},fox:{name:"妖狐",color:i.yellow}},o={unknown:{name:"？",color:i.gray},white:{name:"白",color:i.white,text:i.black},black:{name:"黒",color:i.black}},d={sixPlayers:{name:"6人",roles:[c.citizen,c.citizen,c.seer,c.knight,c.werewolf,c.werewolf]},ninePlayersWithMedium:{name:"9人(霊媒)",roles:[c.citizen,c.citizen,c.citizen,c.seer,c.knight,c.medium,c.werewolf,c.werewolf,c.madman]},ninePlayersWithHunter:{name:"9人(ハンター)",roles:[c.citizen,c.citizen,c.citizen,c.seer,c.knight,c.hunter,c.werewolf,c.werewolf,c.madman]},thirteenPlayers:{name:"13人",roles:[c.citizen,c.citizen,c.citizen,c.citizen,c.citizen,c.seer,c.knight,c.medium,c.hunter,c.werewolf,c.werewolf,c.werewolf,c.madman]}},u=e=>{let{isOpen:t,onClose:l,children:s}=e;return t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-40",onClick:()=>l()}),(0,r.jsx)("div",{className:"fixed inset-0 p-6 flex items-center justify-center pointer-events-none z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md pointer-events-auto",onClick:e=>e.stopPropagation(),children:s})})]}):null},h=e=>{let{children:t,onClick:l,type:s="button",disabled:a=!1,className:n="",active:i=!1,activeColor:c,color:o}=e;return(0,r.jsx)("button",{type:s,onClick:l,disabled:a,className:"p-1 rounded-md cursor-pointer text-white disabled:bg-gray-400 disabled:cursor-not-allowed ".concat(i?null!=c?c:"bg-green-400":null!=o?o:"bg-blue-400"," ").concat(i?"":"hover:opacity-80"," transition ").concat(n),children:t})},m=e=>{let{label:t,errorMessage:l,className:s,...a}=e;return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,r.jsx)("input",{className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(l?"border-red-500":"border-gray-300"," ").concat(s),...a}),l&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:l})]})},x=e=>{let{role:t,className:l,onClick:s}=e;return(0,r.jsx)("span",{className:"p-1 rounded text-white whitespace-nowrap text-center ".concat(s?"cursor-pointer":""," ").concat(l),style:{backgroundColor:t.color,...t.text?{color:t.text}:{}},onClick:()=>null==s?void 0:s(t),children:t.name})},p=e=>{let{isOpen:t,onClose:l,settings:a,onSubmit:n}=e,[i,o]=(0,s.useState)(a),[d,p]=(0,s.useState)("".concat(a.roles.length));return(0,s.useEffect)(()=>{o(a),p("".concat(a.roles.length))},[a]),(0,r.jsx)(u,{isOpen:t,onClose:l,children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("h2",{className:"text-lg font-bold",children:"設定"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(m,{label:"人数",value:d,onChange:e=>{p(e.target.value);let t=parseInt(e.target.value,10);!isNaN(t)&&!(t<1)&&o(e=>{let l=e.roles.slice(0,t);return l.length<t&&l.push(...Array(t-l.length).fill(null).map(()=>c.citizen)),{...e,roles:l}})}})}),(0,r.jsx)("div",{className:"p-4 flex flex-col",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:i.roles.map((e,t)=>(0,r.jsx)(x,{role:e,className:"cursor-pointer"},t))})})]}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(h,{onClick:()=>n(i),children:"変更"})})]})})},f=e=>{let{children:t,trigger:l,className:a,offsetX:n,offsetY:i}=e,[c,o]=(0,s.useState)(!1),d=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=e=>{let t=e=>null!==e&&(e===d.current||t(e.parentElement));!t(e.target)&&o(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,r.jsxs)("div",{className:"relative",ref:d,children:[(0,r.jsx)("div",{onClickCapture:()=>{o(e=>!e)},children:l}),c&&(0,r.jsx)("div",{className:"absolute bg-white border border-gray-400 rounded-lg shadow-lg p-4 z-50 ".concat(a),style:{...n?{left:"".concat(n,"px")}:{},...i?{top:"".concat(i,"px")}:{}},children:t})]})};var g=l(4315);function b(){let[e]=(0,s.useState)(Object.values(d)),[t]=(0,s.useState)(Object.values(c)),[l,i]=(0,s.useState)(d.sixPlayers),[u,m]=(0,s.useState)(l.roles.map(()=>({role:o.unknown,status:a.alive,divinations:[],lines:[]}))),[b,v]=(0,s.useState)(0),[j,w]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=l.roles.map(()=>({role:o.unknown,status:a.alive,divinations:[],lines:[]}));m(e),v(0),w(e.map((e,t)=>"".concat(t+1,". ")).join("\n\n"))},[l]);let y=[o.unknown,o.white,o.black,...l.roles.reduce((e,t)=>(e.find(e=>e.name===t.name)||e.push(t),e),[])],[k,N]=(0,s.useState)(!1),O=(0,s.useRef)(null),P=360/l.roles.length*Math.PI/180,C=(0,s.useMemo)(()=>null===O.current?250:Math.min(250,O.current.getBoundingClientRect().width/2-20),[O.current,100]),[M,z]=(0,s.useState)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("nav",{className:"bg-black text-white p-4 flex flex-row justify-between",children:[(0,r.jsx)("div",{className:"font-bold",children:"人狼考察補助ツール"}),(0,r.jsx)("div",{className:"cursor-pointer text-gray-400 hover:text-gray-200 hidden",onClick:()=>N(!0),children:(0,r.jsx)(g.XGb,{})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("div",{className:"p-4 flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap items-center",children:[(0,r.jsx)("div",{className:"w-[40px]",children:"村"}),e.map((e,t)=>(0,r.jsx)(h,{className:"px-2",onClick:()=>{i({...e})},children:e.name},t))]}),(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap items-center",children:[(0,r.jsx)("div",{className:"w-[40px]",children:"構成"}),l.roles.map((e,l)=>(0,r.jsx)(f,{trigger:(0,r.jsx)(x,{role:e,className:"cursor-pointer"}),children:(0,r.jsx)("div",{className:"flex flex-col flex-wrap gap-2",children:t.map((e,t)=>(0,r.jsx)(x,{role:e,onClick:e=>i(t=>({...t,roles:t.roles.map((t,r)=>r===l?e:t)}))},t))})},l))]}),(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap items-center",children:[(0,r.jsx)("div",{className:"w-[40px]",children:"席次"}),l.roles.map((e,t)=>(0,r.jsx)(h,{className:"px-2",active:b===t,onClick:()=>{v(t)},children:t+1},t))]}),(0,r.jsx)("div",{className:"flex justify-start",ref:O,children:(0,r.jsx)("div",{className:"relative ms-8 md:ms-12",style:{marginTop:50,marginBottom:50,width:2*C+100,height:2*C},children:u.map((e,t)=>{var l,i;let c=(t-b+u.length)%u.length,o=Math.cos(P*c+Math.PI/2)*C+C,d=Math.sin(P*c+Math.PI/2)*C+C,p=(null!==(i=null===(l=O.current)||void 0===l?void 0:l.getBoundingClientRect().width)&&void 0!==i?i:0)-o-420+50;return(0,r.jsxs)(s.Fragment,{children:[(null===M||M===t)&&e.divinations.filter(e=>e.status!==n.unknown).map((e,t)=>{let l=(e.target-b+u.length)%u.length,s=Math.cos(P*l+Math.PI/2)*C+C,a=Math.sin(P*l+Math.PI/2)*C+C,i=o-C,c=d-C,h=s-C,m=a-C,x=Math.atan2(c-m,i-h),p=20*Math.cos(x+30*Math.PI/180)+h+C,f=20*Math.sin(x+30*Math.PI/180)+m+C;return(0,r.jsx)("div",{className:"absolute opacity-30 z-40 pointer-events-none",children:(0,r.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:2*C+100,height:2*C},children:[(0,r.jsx)("line",{x1:o,y1:d,x2:s,y2:a,stroke:e.status===n.black?"red":"blue",strokeWidth:"2"}),(0,r.jsx)("line",{x1:s,y1:a,x2:p,y2:f,stroke:e.status===n.black?"red":"blue",strokeWidth:"2"})]})},t)}),(null===M||M===t)&&e.lines.filter(e=>e.status!==n.unknown||null===M||M===t).map((e,t)=>{let l=(e.target-b+u.length)%u.length,s=Math.cos(P*l+Math.PI/2)*C+C,a=Math.sin(P*l+Math.PI/2)*C+C,i=o-C,c=d-C,h=s-C,m=a-C,x=Math.atan2(c-m,i-h),p=20*Math.cos(x+30*Math.PI/180)+h+C,f=20*Math.sin(x+30*Math.PI/180)+m+C;return(0,r.jsx)("div",{className:"absolute opacity-50 z-30 pointer-events-none",children:(0,r.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:2*C+100,height:2*C},children:[(0,r.jsx)("line",{x1:o,y1:d,x2:s,y2:a,stroke:e.status===n.black?"red":"gray",strokeWidth:"1",strokeDasharray:"4"}),(0,r.jsx)("line",{x1:s,y1:a,x2:p,y2:f,stroke:e.status===n.black?"red":"gray",strokeWidth:"1",strokeDasharray:"4"})]})},t)}),(0,r.jsx)("div",{className:"absolute",style:{left:o-50,top:d-25,width:100,height:50},children:(0,r.jsx)(f,{trigger:(0,r.jsxs)("div",{className:"".concat(e.status===a.alive?"bg-white border-gray-400":e.status===a.bitten?"bg-red-400 opacity-50 border-red-400 text-white":"bg-gray-400 opacity-50 border-gray-400 text-white"," border rounded flex gap-2 p-2 cursor-pointer"),onMouseEnter:()=>z(t),onMouseLeave:()=>z(null),children:[t+1,(0,r.jsx)(x,{role:e.role})]}),offsetY:54,offsetX:p<0?p:0,children:(0,r.jsxs)("div",{className:"w-100 flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-[50px]",children:"役職"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map((e,l)=>(0,r.jsx)(x,{role:e,onClick:e=>{m(l=>l.map((l,r)=>r===t?{...l,role:e}:l))}},l))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-[50px]",children:"生死"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.values(a).map((l,s)=>(0,r.jsx)(h,{color:"bg-gray-400",activeColor:l===a.alive?"bg-gray-400":l===a.bitten?"bg-red-400":"bg-black",active:e.status===l,onClick:()=>{m(e=>e.map((e,r)=>r===t?{...e,status:l}:e))},children:l},s))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-[50px]",children:"占い"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map((l,s)=>{let a=e.divinations.find(e=>e.target===s),i=(null==a?void 0:a.status)===n.white?n.black:(null==a?void 0:a.status)===n.black?n.unknown:n.white;return(0,r.jsx)(h,{className:"px-2",color:(null==a?void 0:a.status)===n.white?"bg-blue-400":(null==a?void 0:a.status)===n.black?"bg-red-400":"bg-gray-400",onClick:()=>{m(e=>e.map((e,l)=>l===t?{...e,divinations:[...e.divinations.filter(e=>e.target!==s),{target:s,status:i}]}:e))},children:s+1},s)})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-[50px]",children:"ライン"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map((l,s)=>{let a=e.lines.find(e=>e.target===s),i=(null==a?void 0:a.status)===n.white?n.black:(null==a?void 0:a.status)===n.black?n.unknown:n.white;return(0,r.jsx)(h,{className:"px-2",color:(null==a?void 0:a.status)===n.white?"bg-blue-400":(null==a?void 0:a.status)===n.black?"bg-red-400":"bg-gray-400",onClick:()=>{m(e=>e.map((e,l)=>l===t?{...e,lines:[...e.lines.filter(e=>e.target!==s),{target:s,status:i}]}:e))},children:s+1},s)})})]})]})})},t)]},t)})})})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("textarea",{className:"w-150 h-200 border border-gray-400 p-4",onChange:e=>w(e.target.value),value:j})})]}),(0,r.jsx)(p,{isOpen:k,onClose:()=>N(!1),settings:l,onSubmit:e=>{i(e),N(!1)}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[446,441,684,358],()=>t(1145)),_N_E=e.O()}]);